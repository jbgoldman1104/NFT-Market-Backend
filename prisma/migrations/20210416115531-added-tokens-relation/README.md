# Migration `20210416115531-added-tokens-relation`

This migration has been generated by rahuldamodar94 at 4/16/2021, 11:55:31 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "mainnet"."orders" ADD FOREIGN KEY ("tokens_id", "categories_id")REFERENCES "mainnet"."tokens"("token_id","categories_id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210415163425-added-tokens-table..20210416115531-added-tokens-relation
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
   active    Boolean? @default(true)
@@ -136,8 +136,9 @@
   seller             Int?
   updated            DateTime        @default(now())
   views              Int?            @default(0)
   categories         categories      @relation(fields: [categories_id], references: [id])
+  tokens             tokens          @relation(fields: [tokens_id,categories_id], references: [token_id, categories_id])
   erc20tokens        erc20tokens     @relation(fields: [erc20tokens_id], references: [id])
   buyer_users        users?          @relation("buyer_orders", fields: [buyer], references: [id])
   seller_users       users?          @relation("seller_orders", fields: [seller], references: [id])
   bids               bids[]
```


