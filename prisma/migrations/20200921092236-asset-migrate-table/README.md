# Migration `20200921092236-asset-migrate-table`

This migration has been generated by rahuldamodar94 at 9/21/2020, 9:22:36 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."assetmigrate" (
"categories_id" integer  NOT NULL ,"created" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"exit_txhash" text   ,"id" SERIAL,"status" integer  NOT NULL ,"token_array" text []  ,"txhash" text  NOT NULL ,"type" text  NOT NULL ,"updated" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"users_id" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "assetmigrate.txhash" ON "public"."assetmigrate"("txhash")

CREATE UNIQUE INDEX "assetmigrate.exit_txhash" ON "public"."assetmigrate"("exit_txhash")

ALTER TABLE "public"."assetmigrate" ADD FOREIGN KEY ("users_id")REFERENCES "public"."users"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."assetmigrate" ADD FOREIGN KEY ("categories_id")REFERENCES "public"."categories"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200722200442-added-market-price..20200921092236-asset-migrate-table
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
   active    Boolean? @default(true)
@@ -31,8 +31,9 @@
   updated             DateTime              @default(now())
   url                 String?
   categoriesaddresses categoriesaddresses[]
   orders              orders[]
+  assetmigrate        assetmigrate[]
 }
 model categoriesaddresses {
   active        Boolean?   @default(true)
@@ -121,8 +122,9 @@
   favourites    favourites[]
   buyer_orders  orders[]        @relation("buyer_orders")
   seller_orders orders[]        @relation("seller_orders")
   notifications notifications[]
+  assetmigrate  assetmigrate[]
 }
 model admins {
   active   Boolean? @default(true)
@@ -144,4 +146,19 @@
   orders   orders   @relation(fields: [order_id], references: [id])
   users    users    @relation(fields: [usersId], references: [id])
   usersId  Int
 }
+
+model assetmigrate {
+  created       DateTime   @default(now())
+  id            Int        @default(autoincrement()) @id
+  updated       DateTime   @default(now())
+  type          String
+  txhash        String     @unique
+  exit_txhash   String?    @unique
+  token_array   String[]
+  users_id      Int
+  categories_id Int
+  status        Int
+  users         users      @relation(fields: [users_id], references: [id])
+  categories    categories @relation(fields: [categories_id], references: [id])
+}
```


