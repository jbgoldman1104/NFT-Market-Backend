# Migration `20200715101944-chg-notification-schema`

This migration has been generated by rahuldamodar94 at 7/15/2020, 10:19:44 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."notificatons" DROP CONSTRAINT IF EXiSTS "notificatons_bid_id_fkey",
ADD COLUMN "message" text  NOT NULL ,
ALTER COLUMN "bid_id" DROP NOT NULL;

ALTER TABLE "public"."notificatons" ADD FOREIGN KEY ("bid_id")REFERENCES "public"."bids"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200617113745-removed-token-logic..20200715101944-chg-notification-schema
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
   active       Boolean?       @default(true)
@@ -72,15 +72,15 @@
   usersId     Int?
 }
 model favourites {
-  created   DateTime @default(now())
-  id        Int      @default(autoincrement()) @id
-  order_id  Int
-  updated   DateTime @default(now())
-  users_id  Int
-  orders    orders   @relation(fields: [order_id], references: [id])
-  users     users    @relation(fields: [users_id], references: [id])
+  created  DateTime @default(now())
+  id       Int      @default(autoincrement()) @id
+  order_id Int
+  updated  DateTime @default(now())
+  users_id Int
+  orders   orders   @relation(fields: [order_id], references: [id])
+  users    users    @relation(fields: [users_id], references: [id])
 }
 model orders {
   active         Boolean?       @default(true)
@@ -107,8 +107,9 @@
   maker_users    users          @relation("maker_orders", fields: [maker_address], references: [id])
   taker_users    users?         @relation("taker_orders", fields: [taker_address], references: [id])
   bids           bids[]
   notificatons   notificatons[]
+  favourites     favourites[]
 }
 model users {
   active       Boolean?               @default(true)
@@ -137,10 +138,11 @@
   read     Boolean  @default(true)
   active   Boolean  @default(true)
   created  DateTime @default(now())
   id       Int      @default(autoincrement()) @id
+  message  String
   updated  DateTime @default(now())
   order_id Int
   orders   orders   @relation(fields: [order_id], references: [id])
-  bid_id   Int
-  bids     bids     @relation(fields: [bid_id], references: [id])
+  bid_id   Int?
+  bids     bids?    @relation(fields: [bid_id], references: [id])
 }
```


