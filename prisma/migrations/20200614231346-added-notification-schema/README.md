# Migration `20200614231346-added-notification-schema`

This migration has been generated by rahul at 6/14/2020, 11:13:46 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."notificatons" (
"active" boolean  NOT NULL DEFAULT true,"bid_id" integer  NOT NULL ,"created" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" SERIAL,"order_id" integer  NOT NULL ,"read" boolean  NOT NULL DEFAULT true,"updated" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."notificatons" ADD FOREIGN KEY ("order_id")REFERENCES "public"."orders"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."notificatons" ADD FOREIGN KEY ("bid_id")REFERENCES "public"."bids"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200608092241-admin-auth..20200614231346-added-notification-schema
--- datamodel.dml
+++ datamodel.dml
@@ -3,22 +3,23 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
-  active    Boolean? @default(true)
-  created   DateTime @default(now())
-  id        Int      @default(autoincrement()) @id
-  orders_id Int
-  price     String
-  status    Int?     @default(0)
-  updated   DateTime @default(now())
-  users_id  Int
-  orders    orders   @relation(fields: [orders_id], references: [id])
-  users     users    @relation(fields: [users_id], references: [id])
+  active       Boolean?       @default(true)
+  created      DateTime       @default(now())
+  id           Int            @default(autoincrement()) @id
+  orders_id    Int
+  price        String
+  status       Int?           @default(0)
+  updated      DateTime       @default(now())
+  users_id     Int
+  orders       orders         @relation(fields: [orders_id], references: [id])
+  users        users          @relation(fields: [users_id], references: [id])
+  notificatons notificatons[]
 }
 model categories {
   active              Boolean?              @default(true)
@@ -82,33 +83,34 @@
   users     users    @relation(fields: [users_id], references: [id])
 }
 model orders {
-  active         Boolean?    @default(true)
+  active         Boolean?       @default(true)
   chain_id       String
   categories_id  Int
-  created        DateTime    @default(now())
+  created        DateTime       @default(now())
   erc20tokens_id Int
   expiry_date    DateTime?
-  id             Int         @default(autoincrement()) @id
+  id             Int            @default(autoincrement()) @id
   maker_address  Int
   min_price      String
   price          String
   signature      String?
-  status         Int?        @default(0)
+  status         Int?           @default(0)
   taker_address  Int?
   taker_amount   String?
   tokens_id      Int
   txhash         String?
   type           String
-  updated        DateTime    @default(now())
-  views          Int?        @default(0)
-  categories     categories  @relation(fields: [categories_id], references: [id])
-  erc20tokens    erc20tokens @relation(fields: [erc20tokens_id], references: [id])
-  maker_users    users       @relation("maker_orders", fields: [maker_address], references: [id])
-  taker_users    users?      @relation("taker_orders", fields: [taker_address], references: [id])
-  tokens         tokens      @relation(fields: [tokens_id], references: [id])
+  updated        DateTime       @default(now())
+  views          Int?           @default(0)
+  categories     categories     @relation(fields: [categories_id], references: [id])
+  erc20tokens    erc20tokens    @relation(fields: [erc20tokens_id], references: [id])
+  maker_users    users          @relation("maker_orders", fields: [maker_address], references: [id])
+  taker_users    users?         @relation("taker_orders", fields: [taker_address], references: [id])
+  tokens         tokens         @relation(fields: [tokens_id], references: [id])
   bids           bids[]
+  notificatons   notificatons[]
 }
 model tokens {
   active        Boolean?    @default(true)
@@ -152,4 +154,16 @@
   created  DateTime @default(now())
   id       Int      @default(autoincrement()) @id
   updated  DateTime @default(now())
 }
+
+model notificatons {
+  read     Boolean  @default(true)
+  active   Boolean  @default(true)
+  created  DateTime @default(now())
+  id       Int      @default(autoincrement()) @id
+  updated  DateTime @default(now())
+  order_id Int
+  orders   orders   @relation(fields: [order_id], references: [id])
+  bid_id   Int
+  bids     bids     @relation(fields: [bid_id], references: [id])
+}
```


