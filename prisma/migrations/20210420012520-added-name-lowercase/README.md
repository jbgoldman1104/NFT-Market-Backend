# Migration `20210420012520-added-name-lowercase`

This migration has been generated by rahuldamodar94 at 4/20/2021, 1:25:20 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "mainnet"."orders" DROP COLUMN "name";

ALTER TABLE "mainnet"."tokens" ADD COLUMN "name_lowercase" text   DEFAULT E'';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210416115531-added-tokens-relation..20210420012520-added-name-lowercase
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
   active    Boolean? @default(true)
@@ -55,20 +55,21 @@
   @@id([address, chain_id])
 }
 model tokens {
-  token_id      String
-  categories_id Int
-  image_url     String?
-  description   String?
-  external_url  String?
-  name          String?
-  attributes    String?
-  created       DateTime   @default(now())
-  id            Int        @default(autoincrement())
-  updated       DateTime   @default(now())
-  categories    categories @relation(fields: [categories_id], references: [id])
-  orders        orders[]
+  token_id       String
+  categories_id  Int
+  image_url      String?
+  description    String?
+  external_url   String?
+  name           String?
+  name_lowercase String?    @default("")
+  attributes     String?
+  created        DateTime   @default(now())
+  id             Int        @default(autoincrement())
+  updated        DateTime   @default(now())
+  categories     categories @relation(fields: [categories_id], references: [id])
+  orders         orders[]
   @@id([token_id, categories_id])
 }
@@ -129,16 +130,15 @@
   taker_amount       String?
   maker_amount       String?
   tokens_id          String
   txhash             String?
-  name               String?         @default("")
   type               String
   buyer              Int?
   seller             Int?
   updated            DateTime        @default(now())
   views              Int?            @default(0)
   categories         categories      @relation(fields: [categories_id], references: [id])
-  tokens             tokens          @relation(fields: [tokens_id,categories_id], references: [token_id, categories_id])
+  tokens             tokens          @relation(fields: [tokens_id, categories_id], references: [token_id, categories_id])
   erc20tokens        erc20tokens     @relation(fields: [erc20tokens_id], references: [id])
   buyer_users        users?          @relation("buyer_orders", fields: [buyer], references: [id])
   seller_users       users?          @relation("seller_orders", fields: [seller], references: [id])
   bids               bids[]
```


