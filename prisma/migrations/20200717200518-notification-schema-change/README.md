# Migration `20200717200518-notification-schema-change`

This migration has been generated by rahuldamodar94 at 7/17/2020, 8:05:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."erc20tokens" DROP CONSTRAINT IF EXiSTS "erc20tokens_usersId_fkey",
DROP COLUMN "usersId";

ALTER TABLE "public"."erc20tokensaddresses" DROP CONSTRAINT IF EXiSTS "erc20tokensaddresses_usersId_fkey",
DROP COLUMN "usersId";

ALTER TABLE "public"."notifications" DROP CONSTRAINT IF EXiSTS "notifications_bid_id_fkey",
DROP COLUMN "bid_id",
ALTER COLUMN "read" SET DEFAULT false;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200715111112-notification-schema-update..20200717200518-notification-schema-change
--- datamodel.dml
+++ datamodel.dml
@@ -3,23 +3,22 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
-  active        Boolean?        @default(true)
-  created       DateTime        @default(now())
-  id            Int             @default(autoincrement()) @id
-  orders_id     Int
-  price         String
-  status        Int?            @default(0)
-  updated       DateTime        @default(now())
-  users_id      Int
-  orders        orders          @relation(fields: [orders_id], references: [id])
-  users         users           @relation(fields: [users_id], references: [id])
-  notifications notifications[]
+  active    Boolean? @default(true)
+  created   DateTime @default(now())
+  id        Int      @default(autoincrement()) @id
+  orders_id Int
+  price     String
+  status    Int?     @default(0)
+  updated   DateTime @default(now())
+  users_id  Int
+  orders    orders   @relation(fields: [orders_id], references: [id])
+  users     users    @relation(fields: [users_id], references: [id])
 }
 model categories {
   active              Boolean?              @default(true)
@@ -54,10 +53,8 @@
   symbol               String                 @unique
   updated              DateTime               @default(now())
   erc20tokensaddresses erc20tokensaddresses[]
   orders               orders[]
-  users                users?                 @relation(fields: [usersId], references: [id])
-  usersId              Int?
 }
 model erc20tokensaddresses {
   active      Boolean?    @default(true)
@@ -67,10 +64,8 @@
   id          Int         @default(autoincrement()) @id
   token_id    Int
   updated     DateTime    @default(now())
   erc20tokens erc20tokens @relation(fields: [token_id], references: [id])
-  users       users?      @relation(fields: [usersId], references: [id])
-  usersId     Int?
 }
 model favourites {
   created  DateTime @default(now())
@@ -111,19 +106,17 @@
   favourites     favourites[]
 }
 model users {
-  active        Boolean?               @default(true)
-  address       String                 @unique
-  created       DateTime               @default(now())
-  id            Int                    @default(autoincrement()) @id
-  updated       DateTime               @default(now())
+  active        Boolean?        @default(true)
+  address       String          @unique
+  created       DateTime        @default(now())
+  id            Int             @default(autoincrement()) @id
+  updated       DateTime        @default(now())
   bids          bids[]
   favourites    favourites[]
-  maker_orders  orders[]               @relation("maker_orders")
-  taker_orders  orders[]               @relation("taker_orders")
-  approved      erc20tokensaddresses[]
-  erc20tokens   erc20tokens[]
+  maker_orders  orders[]        @relation("maker_orders")
+  taker_orders  orders[]        @relation("taker_orders")
   notifications notifications[]
 }
 model admins {
@@ -135,17 +128,15 @@
   updated  DateTime @default(now())
 }
 model notifications {
-  read     Boolean  @default(true)
+  read     Boolean  @default(false)
   active   Boolean  @default(true)
   created  DateTime @default(now())
   id       Int      @default(autoincrement()) @id
   message  String
   updated  DateTime @default(now())
   order_id Int
   orders   orders   @relation(fields: [order_id], references: [id])
-  bid_id   Int?
-  bids     bids?    @relation(fields: [bid_id], references: [id])
   users    users    @relation(fields: [usersId], references: [id])
   usersId  Int
 }
```


