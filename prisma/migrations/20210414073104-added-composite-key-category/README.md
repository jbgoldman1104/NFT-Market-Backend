# Migration `20210414073104-added-composite-key-category`

This migration has been generated by rahuldamodar94 at 4/14/2021, 7:31:04 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "mainnet"."categoriesaddresses.address"

DROP INDEX "mainnet"."order_category_id"

DROP INDEX "mainnet"."order_status"

DROP INDEX "mainnet"."orderid_index"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210408125925..20210414073104-added-composite-key-category
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
   active    Boolean? @default(true)
@@ -41,16 +41,17 @@
 }
 model categoriesaddresses {
   active           Boolean?   @default(true)
-  address          String     @unique
+  address          String     
   ethereum_address String
   categories_id    Int
   chain_id         String
   created          DateTime   @default(now())
-  id               Int        @default(autoincrement()) @id
+  id               Int        @default(autoincrement())
   updated          DateTime   @default(now())
   categories       categories @relation(fields: [categories_id], references: [id])
+  @@id([address, chain_id])
 }
 model erc20tokens {
   active               Boolean?               @default(true)
```


