# Migration `20200520180926-added-unique`

This migration has been generated by rahul at 5/20/2020, 6:09:26 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."categories" DROP COLUMN "name",
ADD COLUMN "name" text  NOT NULL ;

ALTER TABLE "public"."erc20tokens" DROP COLUMN "icon",
DROP COLUMN "name",
ADD COLUMN "name" text  NOT NULL ,
DROP COLUMN "symbol",
ADD COLUMN "symbol" text  NOT NULL ;

CREATE UNIQUE INDEX "categories.name" ON "public"."categories"("name")

CREATE UNIQUE INDEX "erc20tokens.symbol" ON "public"."erc20tokens"("symbol")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200520172524-initial..20200520180926-added-unique
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
   active    Boolean? @default(true)
@@ -25,9 +25,9 @@
   created             DateTime              @default(now())
   description         String?
   id                  Int                   @default(autoincrement()) @id
   img_url             String?
-  name                String?
+  name                String                @unique
   updated             DateTime              @default(now())
   url                 String?
   categoriesaddresses categoriesaddresses[]
   orders              orders[]
@@ -48,12 +48,11 @@
 model erc20tokens {
   active               Boolean?               @default(true)
   created              DateTime               @default(now())
   decimal              Int
-  icon                 String?
   id                   Int                    @default(autoincrement()) @id
-  name                 String?
-  symbol               String?
+  name                 String
+  symbol               String                 @unique
   updated              DateTime               @default(now())
   erc20tokensaddresses erc20tokensaddresses[]
   orders               orders[]
 }
```


